The tests fail because all of the promises are async
They are not sequential
